# Payment Flow - Visual Architecture & Diagrams

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (Vue/HTML/JS)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Reservations Page                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Reservation Card #1                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Car: Toyota Camry                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Status: Active                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Price: $150.00                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ [Cancel] [Pay] [Details]    â† NEW PAY BUTTON  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Reservation Card #2                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Car: Honda CR-V                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Status: Pending                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ [Details]      (Pay button disabled)           â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     Payment Success Page (NEW)                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚              âœ… SUCCESS ICON                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Payment Successful!                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Your reservation has been confirmed              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Status: Completed                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Reservation ID: abc-123-def-456                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  [View Reservations] [Browse Cars]                â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     Payment Failed Page (NEW)                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                 âŒ ERROR ICON                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Payment Failed                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  We couldn't process your payment                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Reservation ID: abc-123-def-456                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Error: Card declined                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  [Retry Payment] [Back to Cars]                   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ API Calls
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (C# / .NET)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Payment Controller                                       â”‚ â”‚
â”‚  â”‚ â”œâ”€ POST /Payment/create-session                         â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Validate reservation & user                       â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ Call Stripe API                                   â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ Return checkout URL                               â”‚ â”‚
â”‚  â”‚ â”‚                                                         â”‚ â”‚
â”‚  â”‚ â””â”€ GET /Payment/verify                                  â”‚ â”‚
â”‚  â”‚    â”œâ”€ Check payment status                              â”‚ â”‚
â”‚  â”‚    â””â”€ Return current state                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Database                                                 â”‚ â”‚
â”‚  â”‚ â”œâ”€ Reservations                                          â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ id                                                 â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ status (Active, Pending, Completed, Cancelled)    â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ paymentStatus (null, Pending, Completed, Failed)  â”‚ â”‚
â”‚  â”‚ â”‚                                                         â”‚ â”‚
â”‚  â”‚ â””â”€ Payments (Optional)                                   â”‚ â”‚
â”‚  â”‚    â”œâ”€ id                                                 â”‚ â”‚
â”‚  â”‚    â”œâ”€ reservationId (FK)                                 â”‚ â”‚
â”‚  â”‚    â”œâ”€ amount                                             â”‚ â”‚
â”‚  â”‚    â”œâ”€ status                                             â”‚ â”‚
â”‚  â”‚    â””â”€ stripeSessionId                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ API Calls
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STRIPE (External)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stripe Checkout Session                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€ Create session with amount & URLs                    â”‚ â”‚
â”‚  â”‚ â”œâ”€ Generate checkout link                               â”‚ â”‚
â”‚  â”‚ â””â”€ Handle payment events                                â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Webhook Events                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€ checkout.session.completed                            â”‚ â”‚
â”‚  â”‚ â”œâ”€ payment_intent.succeeded                              â”‚ â”‚
â”‚  â”‚ â””â”€ charge.refunded (future)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
START
  â”‚
  â”œâ”€ User navigates to Reservations
  â”‚   â””â”€ Renders list with "Pay" buttons
  â”‚
  â”œâ”€ User clicks [Pay] on active reservation
  â”‚   â”‚
  â”‚   â”œâ”€ initiatePayment(reservationId)
  â”‚   â”‚   â”‚
  â”‚   â”‚   â””â”€ createPaymentSession(reservationId)
  â”‚   â”‚       â”‚
  â”‚   â”‚       â”œâ”€ Construct URLs:
  â”‚   â”‚       â”‚  â”œâ”€ successUrl
  â”‚   â”‚       â”‚  â””â”€ cancelUrl
  â”‚   â”‚       â”‚
  â”‚   â”‚       â”œâ”€ Send POST /Payment/create-session
  â”‚   â”‚       â”‚  â”‚
  â”‚   â”‚       â”‚  â””â”€ Backend:
  â”‚   â”‚       â”‚     â”œâ”€ Validate reservation
  â”‚   â”‚       â”‚     â”œâ”€ Call Stripe API
  â”‚   â”‚       â”‚     â””â”€ Return {checkoutUrl}
  â”‚   â”‚       â”‚
  â”‚   â”‚       â””â”€ Receive checkoutUrl
  â”‚   â”‚           â”‚
  â”‚   â”‚           â””â”€ window.location.href = checkoutUrl
  â”‚   â”‚
  â”‚   â””â”€ REDIRECT TO STRIPE CHECKOUT
  â”‚
  â”œâ”€ User at Stripe Checkout
  â”‚   â”‚
  â”‚   â”œâ”€ Option 1: Complete Payment âœ…
  â”‚   â”‚   â”‚
  â”‚   â”‚   â”œâ”€ Enter card details
  â”‚   â”‚   â”œâ”€ Stripe processes payment
  â”‚   â”‚   â”œâ”€ Backend receives webhook
  â”‚   â”‚   â””â”€ Redirect to successUrl
  â”‚   â”‚       â”‚
  â”‚   â”‚       â””â”€ payment-success.html?reservationId=...
  â”‚   â”‚
  â”‚   â””â”€ Option 2: Cancel/Fail âŒ
  â”‚       â”‚
  â”‚       â”œâ”€ User clicks back / Payment declines
  â”‚       â”œâ”€ Stripe cancels session
  â”‚       â””â”€ Redirect to cancelUrl
  â”‚           â”‚
  â”‚           â””â”€ payment-failed.html?reservationId=...
  â”‚
  â”œâ”€ At Payment Success Page
  â”‚   â”‚
  â”‚   â”œâ”€ Extract reservationId from URL
  â”‚   â”œâ”€ verifyReservationPayment(reservationId)
  â”‚   â”‚   â”‚
  â”‚   â”‚   â””â”€ Send GET /Payment/verify?reservationId=...
  â”‚   â”‚       â”‚
  â”‚   â”‚       â””â”€ Backend:
  â”‚   â”‚          â”œâ”€ Query payment status
  â”‚   â”‚          â””â”€ Return {status: "completed|pending|failed"}
  â”‚   â”‚
  â”‚   â”œâ”€ Receive status response
  â”‚   â”‚   â”‚
  â”‚   â”‚   â”œâ”€ Status === "completed"
  â”‚   â”‚   â”‚   â””â”€ showSuccessState()
  â”‚   â”‚   â”‚       â”œâ”€ Green checkmark icon âœ…
  â”‚   â”‚   â”‚       â”œâ”€ "Payment Successful!"
  â”‚   â”‚   â”‚       â””â”€ Show reservation details
  â”‚   â”‚   â”‚
  â”‚   â”‚   â”œâ”€ Status === "pending"
  â”‚   â”‚   â”‚   â””â”€ showPendingState()
  â”‚   â”‚   â”‚       â”œâ”€ Clock icon â±ï¸
  â”‚   â”‚   â”‚       â”œâ”€ "Payment Processing"
  â”‚   â”‚   â”‚       â””â”€ "This may take a few minutes"
  â”‚   â”‚   â”‚
  â”‚   â”‚   â””â”€ Status === "failed"
  â”‚   â”‚       â””â”€ showFailedState()
  â”‚   â”‚           â”œâ”€ Red X icon âŒ
  â”‚   â”‚           â”œâ”€ "Payment Failed"
  â”‚   â”‚           â””â”€ Show error message
  â”‚   â”‚
  â”‚   â””â”€ User can:
  â”‚       â”œâ”€ Click [View Reservations]
  â”‚       â””â”€ Click [Browse Cars]
  â”‚
  â””â”€ At Payment Failed Page
      â”‚
      â”œâ”€ Extract reservationId from URL
      â”œâ”€ Display error message (if provided)
      â”‚
      â””â”€ User can:
          â”œâ”€ Click [Retry Payment]
          â”‚   â””â”€ Back to createPaymentSession()
          â”‚
          â””â”€ Click [Back to Cars]
              â””â”€ Navigate to cars page

END
```

---

## ğŸ“Š Component Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Shared Modules                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   api.js        â”‚      â”‚  auth.js     â”‚   â”‚ payments.js â”‚   â”‚
â”‚  â”‚  (NEW IMPORT)   â”‚      â”‚              â”‚   â”‚   (NEW)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                                          â”‚          â”‚
â”‚           â”‚ Provides:                   Provides:   â”‚          â”‚
â”‚           â”‚ â€¢ fetch()                   â€¢ createPaymentSession()
â”‚           â”‚ â€¢ Token mgmt                â€¢ verifyReservationPayment()
â”‚           â”‚ â€¢ Error handling            â€¢ URL construction
â”‚           â”‚                                          â”‚          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                              â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Used by
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  reservations.js â”‚  â”‚ payment-success  â”‚  â”‚ payment-failed   â”‚
â”‚   (UPDATED)      â”‚  â”‚     .js (NEW)    â”‚  â”‚     .js (NEW)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â”‚ Handles:             â”‚ Handles:             â”‚ Handles:
        â”‚ â€¢ Pay button click   â”‚ â€¢ URL params         â”‚ â€¢ URL params
        â”‚ â€¢ Payment init       â”‚ â€¢ Status verify      â”‚ â€¢ Error display
        â”‚ â€¢ Error feedback     â”‚ â€¢ UI updates         â”‚ â€¢ Retry logic
        â”‚                      â”‚ â€¢ Dynamic rendering  â”‚ â€¢ Back nav
        â”‚                      â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Rendered by
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ reservations.css â”‚  â”‚payment-success   â”‚  â”‚payment-failed    â”‚
â”‚                  â”‚  â”‚    .css (NEW)    â”‚  â”‚    .css (NEW)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â”‚ Styles:              â”‚ Styles:              â”‚ Styles:
        â”‚ â€¢ Card layout        â”‚ â€¢ Green success UI   â”‚ â€¢ Red error UI
        â”‚ â€¢ Buttons            â”‚ â€¢ Icons & animation  â”‚ â€¢ Icons & animation
        â”‚ â€¢ Status badges      â”‚ â€¢ Responsive design  â”‚ â€¢ Responsive design
        â”‚                      â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication & Security Flow

```
â”Œâ”€ User Login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  1. User enters credentials                 â”‚
â”‚  2. Auth.login(email, password)             â”‚
â”‚  3. Backend validates & returns JWT         â”‚
â”‚  4. Auth.setToken(jwt) â†’ localStorage       â”‚
â”‚  5. User navigated to dashboard             â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ User token saved
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚
         â–¼                           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ View Page    â”‚           â”‚ API Call     â”‚
   â”‚              â”‚           â”‚              â”‚
   â”‚ Check auth:  â”‚           â”‚ All calls:   â”‚
   â”‚ if (!auth)   â”‚           â”‚              â”‚
   â”‚   redirect   â”‚           â”‚ headers = {  â”‚
   â”‚   to login   â”‚           â”‚  "Authorization":
   â”‚              â”‚           â”‚  "Bearer JWT"
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ }
                              â”‚
                              â”œâ”€ If 401 error
                              â”‚   â””â”€ Token invalid
                              â”‚       Clear token
                              â”‚       Redirect to login
                              â”‚
                              â””â”€ If success
                                  Return data
                                  Update UI

```

---

## ğŸ’³ Payment Status States

```
Reservation Created
       â”‚
       â”œâ”€ Status: "Active"
       â”œâ”€ PaymentStatus: null (not paid yet)
       â”‚
       â””â”€ User clicks [Pay]
           â”‚
           â”œâ”€ POST /Payment/create-session
           â”‚   â”‚
           â”‚   â””â”€ Backend creates Stripe session
           â”‚       â””â”€ Returns checkoutUrl
           â”‚
           â””â”€ Redirect to Stripe Checkout
               â”‚
               â”œâ”€ User completes payment
               â”‚   â”‚
               â”‚   â”œâ”€ Stripe processes
               â”‚   â”‚
               â”‚   â”œâ”€ Webhook event: payment_intent.succeeded
               â”‚   â”‚   â”‚
               â”‚   â”‚   â””â”€ Backend updates:
               â”‚   â”‚       PaymentStatus = "Completed"
               â”‚   â”‚
               â”‚   â””â”€ Redirect to success page
               â”‚       â”‚
               â”‚       â”œâ”€ GET /Payment/verify
               â”‚       â”‚   â”‚
               â”‚       â”‚   â””â”€ Backend returns:
               â”‚       â”‚       {status: "completed"}
               â”‚       â”‚
               â”‚       â””â”€ Frontend shows:
               â”‚           âœ… Payment Successful!
               â”‚
               â””â”€ User cancels/fails
                   â”‚
                   â”œâ”€ Stripe cancels session
                   â”‚
                   â””â”€ Redirect to failed page
                       â”‚
                       â”œâ”€ GET /Payment/verify
                       â”‚   â”‚
                       â”‚   â””â”€ Backend returns:
                       â”‚       {status: "failed"}
                       â”‚
                       â””â”€ Frontend shows:
                           âŒ Payment Failed
                           [Retry Payment]
```

---

## ğŸ¨ Design Color Mapping

```
Payment Success Page           Payment Failed Page
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Background: Indigo Gradient    Background: Indigo Gradient
â”œâ”€ #4f46e5 (top)               â”œâ”€ #4f46e5 (top)
â”œâ”€ #6366f1 (middle)            â”œâ”€ #6366f1 (middle)
â””â”€ #4338ca (bottom)            â””â”€ #4338ca (bottom)

Icon: Green Success            Icon: Red Error
â”œâ”€ Background: #10b981 (20%)    â”œâ”€ Background: #ef4444 (20%)
â””â”€ Color: #10b981              â””â”€ Color: #ef4444

Title: Green                   Title: Red
â””â”€ #10b981                     â””â”€ #ef4444

Buttons: Indigo                Buttons: Red
â”œâ”€ Primary: Indigo gradient    â”œâ”€ Primary: Red gradient
â””â”€ Secondary: White border     â””â”€ Secondary: White border

Details Box: Light Green       Details Box: Light Red
â”œâ”€ Background: #dcfce7         â”œâ”€ Background: #fef2f2
â””â”€ Border: #10b981             â””â”€ Border: #ef4444

Text: Dark Gray
â””â”€ #1f2937
```

---

## ğŸ“± Responsive Breakpoints

```
Desktop (1025px+)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser Window                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Navbar                     â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚  Payment Card           â”‚â”‚â”‚
â”‚  â”‚  â”‚  (max-width: 480px)     â”‚â”‚â”‚
â”‚  â”‚  â”‚                         â”‚â”‚â”‚
â”‚  â”‚  â”‚  âœ… Large Icon          â”‚â”‚â”‚
â”‚  â”‚  â”‚  Payment Successful!    â”‚â”‚â”‚
â”‚  â”‚  â”‚  Status: Completed      â”‚â”‚â”‚
â”‚  â”‚  â”‚                         â”‚â”‚â”‚
â”‚  â”‚  â”‚  [View Reservations]    â”‚â”‚â”‚
â”‚  â”‚  â”‚  [Browse Cars]          â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Padding: 48px | Font: 2rem

Tablet (481px - 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser Window            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Navbar                 â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚  Payment Card       â”‚â”‚â”‚
â”‚  â”‚  â”‚  (full width)       â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚â”‚â”‚
â”‚  â”‚  â”‚  âœ… Medium Icon     â”‚â”‚â”‚
â”‚  â”‚  â”‚  Payment Successful!â”‚â”‚â”‚
â”‚  â”‚  â”‚  Status: Completed  â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚â”‚â”‚
â”‚  â”‚  â”‚  [View Reserv...]   â”‚â”‚â”‚
â”‚  â”‚  â”‚  [Browse Cars]      â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Padding: 32px | Font: 1.5rem

Mobile (320px - 480px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Phone Window       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Navbar          â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                  â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ Payment Card â”‚ â”‚â”‚
â”‚  â”‚ â”‚ (full width) â”‚ â”‚â”‚
â”‚  â”‚ â”‚              â”‚ â”‚â”‚
â”‚  â”‚ â”‚ âœ… Small Icon â”‚ â”‚â”‚
â”‚  â”‚ â”‚ Payment      â”‚ â”‚â”‚
â”‚  â”‚ â”‚ Successful!  â”‚ â”‚â”‚
â”‚  â”‚ â”‚ Status: OK   â”‚ â”‚â”‚
â”‚  â”‚ â”‚              â”‚ â”‚â”‚
â”‚  â”‚ â”‚ [View Res.] â”‚ â”‚â”‚
â”‚  â”‚ â”‚ [Browse] â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Padding: 20px | Font: 1.25rem
```

---

## ğŸ”— File Dependency Tree

```
payment-success.html
â”œâ”€ /shared/navbar.css
â”œâ”€ /shared/components.css
â”œâ”€ /pages/payments/payment-success.css
â”œâ”€ /shared/api.js
â”‚   â””â”€ window.Api.fetch()
â”œâ”€ /shared/auth.js
â”‚   â””â”€ window.Auth.isAuthenticated()
â”œâ”€ /shared/payments.js (NEW)
â”‚   â””â”€ window.Payments.verifyReservationPayment()
â”œâ”€ /shared/navbar.js
â””â”€ /pages/payments/payment-success.js

payment-failed.html
â”œâ”€ /shared/navbar.css
â”œâ”€ /shared/components.css
â”œâ”€ /pages/payments/payment-failed.css
â”œâ”€ /shared/api.js
â”œâ”€ /shared/auth.js
â”œâ”€ /shared/payments.js (NEW)
â”‚   â””â”€ window.Payments.createPaymentSession()
â”œâ”€ /shared/navbar.js
â””â”€ /pages/payments/payment-failed.js

reservations.html (UPDATED)
â”œâ”€ /shared/navbar.css
â”œâ”€ /shared/components.css
â”œâ”€ /pages/reservations/reservations.css
â”œâ”€ /shared/api.js
â”œâ”€ /shared/auth.js
â”œâ”€ /shared/payments.js (NEW IMPORT)
â”‚   â””â”€ window.Payments.createPaymentSession()
â”œâ”€ /shared/navbar.js
â””â”€ /pages/reservations/reservations.js
```

---

**Visual Architecture Complete! âœ…**

For more details, see:
- `PAYMENT_FLOW_GUIDE.md` - Detailed implementation
- `PAYMENT_QUICKSTART.md` - Getting started
- `PAYMENT_VERIFICATION_CHECKLIST.md` - Verification
